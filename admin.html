<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Shadi Piscine - Admin</title>
<style>
body { font-family: Arial; background:#f4f4f4; color:#000; transition:0.3s; }
.dark-mode { background:#121212; color:#fff; }
.container { max-width:800px; margin:auto; padding:20px; background:white; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.1);}
button { padding:10px 20px; border:none; border-radius:8px; cursor:pointer; margin:5px 0; }
button:hover { opacity:0.85; }
.logoutBtn { background:#ff5555; color:white; }
.logoutBtn:hover { background:#cc0000; }
.blockBtn { background:#0077ff; color:white; }
.blockBtn:hover { background:#0055cc; }
.calendar { display:grid; grid-template-columns:repeat(7,1fr); gap:5px; margin:15px 0; }
.day, .slot { padding:20px; text-align:center; border-radius:8px; border:1px solid #ccc; cursor:pointer; background:white; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
.day:hover, .slot:hover { background:#cce5ff; }
.day.reserved, .slot.reserved { background:#ccc; color:#666; cursor:not-allowed; }
.day.selected, .slot.selected { border:2px solid #0077ff; }
table { width:100%; border-collapse:collapse; margin-top:15px; }
th, td { padding:10px; text-align:center; border:1px solid #ccc; border-radius:6px; }
th { background:#0077ff; color:white; }
tr:nth-child(even) { background:#f0f8ff; }
</style>
</head>
<body>

<div class="container" id="adminDiv">
<h2>Admin - Shadi Piscine</h2>
<button onclick="toggleMode()" class="blockBtn">üåô/‚òÄÔ∏è Mode sombre/blanc</button>
<button class="logoutBtn" onclick="logout()">D√©connexion</button>

<h3>Calendrier (Cliquez sur un jour pour voir les cr√©neaux)</h3>
<div class="calendar" id="calendar"></div>

<div id="timeSlots" class="hidden">
  <h3>Cr√©neaux horaires</h3>
  <div class="calendar" id="timeGrid"></div>
</div>

<h3>R√©servations</h3>
<table>
<tr><th>Jour</th><th>Heure</th><th>Nom</th><th>Email</th><th>Message</th></tr>
<tbody id="adminTable"></tbody>
</table>
</div>

<script>
let reservations = JSON.parse(localStorage.getItem('reservations')) || [];
const calendar = document.getElementById('calendar');
let selectedDay = null;

function toggleMode(){ document.body.classList.toggle('dark-mode'); }
function logout(){ window.location.reload(); }

function generateCalendar(){
    calendar.innerHTML="";
    for(let day=1;day<=30;day++){
        const div=document.createElement('div');
        div.textContent=day;
        div.className='day';
        div.addEventListener('click',()=>{
            selectedDay=day;
            showTimeSlots(day);
            document.querySelectorAll('.day').forEach(d=>d.classList.remove('selected'));
            div.classList.add('selected');
        });
        calendar.appendChild(div);
    }
}

function showTimeSlots(day){
  const container=document.getElementById('timeSlots');
  const grid=document.getElementById('timeGrid');
  container.classList.remove('hidden');
  grid.innerHTML="";

  const slots=["09:00","10:30","12:00","13:30","15:00"];
  slots.forEach(hour=>{
    const div=document.createElement('div');
    div.textContent=hour;
    div.className="slot";

    const reserved = reservations.find(r=>r.jour===day && r.heure===hour);
    if(reserved){
        div.classList.add("reserved");
    } else {
        div.addEventListener('click',()=>{
            if(confirm("Bloquer ce cr√©neau pour indisponibilit√© ?")){
                reservations.push({jour:day,heure:hour,nom:"Indisponible",email:"",message:""});
                localStorage.setItem('reservations', JSON.stringify(reservations));
                showTimeSlots(day);
                generateAdminTable();
            }
        });
    }
    grid.appendChild(div);
  });
}

function generateAdminTable(){
    const tbody=document.getElementById('adminTable');
    tbody.innerHTML="";
    reservations.forEach(r=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${r.jour}</td><td>${r.heure}</td><td>${r.nom}</td><td>${r.email}</td><td>${r.message}</td>`;
        tbody.appendChild(tr);
    });
}

generateCalendar();
generateAdminTable();
</script>
</body>
</html>
