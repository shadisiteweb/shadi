<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Admin - Shadi Piscine</title>
<style>
body { font-family: Arial; background:#f4f4f4; }
.container { max-width:800px; margin:auto; padding:20px; }
input { width:100%; padding:8px; margin:5px 0; border-radius:5px; border:1px solid #ccc; }
button { padding:8px 15px; margin:5px; border:none; border-radius:5px; cursor:pointer; }
button.logoutBtn { background:#ff5555; color:white; }
button.logoutBtn:hover { background:#cc0000; }
button.cancelBtn { background:#ff9900; color:white; }
button.cancelBtn:hover { background:#cc7700; }
button.loginBtn { background:#ff3333; color:white; }
button.loginBtn:hover { background:#cc0000; }
.hidden { display:none; }
table { width:100%; border-collapse:collapse; }
td, th { border:1px solid #ccc; padding:8px; text-align:center; }
</style>
</head>
<body>

<div class="container" id="loginDiv">
<h2>Admin Login</h2>
<p><strong>Identifiants :</strong> Nom d’utilisateur = <code>admin</code>, Mot de passe = <code>admin</code></p>
<label>Nom d'utilisateur :</label>
<input type="text" id="username">
<label>Mot de passe :</label>
<input type="password" id="password">
<button class="loginBtn" onclick="login()">Se connecter</button>
<div id="loginError" style="color:red; display:none; margin-top:10px;">Nom ou mot de passe incorrect</div>
</div>

<div class="container hidden" id="adminDiv">
<h2>Admin - Réservations</h2>
<button class="logoutBtn" onclick="logout()">Déconnexion</button>
<table>
<tr><th>Jour</th><th>Nom</th><th>Email</th><th>Message</th><th>Action</th></tr>
<tbody id="adminTable"></tbody>
</table>
</div>

<script>
const adminUser = {username:"admin", password:"admin"};
let reservations = JSON.parse(localStorage.getItem('reservations')) || [];

function login(){
    const u=document.getElementById('username').value;
    const p=document.getElementById('password').value;
    if(u===adminUser.username && p===adminUser.password){
        document.getElementById('loginDiv').classList.add('hidden');
        document.getElementById('adminDiv').classList.remove('hidden');
        generateAdminTable();
    } else {
        document.getElementById('loginError').style.display='block';
    }
}

function logout(){
    document.getElementById('adminDiv').classList.add('hidden');
    document.getElementById('loginDiv').classList.remove('hidden');
}

function generateAdminTable(){
    const tbody=document.getElementById('adminTable');
    tbody.innerHTML="";
    reservations.forEach((r,index)=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`
            <td>${r.jour}</td>
            <td>${r.nom}</td>
            <td>${r.email}</td>
            <td>${r.message}</td>
            <td><button class="cancelBtn" onclick="cancelReservation(${index})">Annuler</button></td>
        `;
        tbody.appendChild(tr);
    });
}

function cancelReservation(index){
    if(confirm("Voulez-vous vraiment annuler cette réservation ?")){
        reservations.splice(index,1);
        localStorage.setItem('reservations', JSON.stringify(reservations));
        generateAdminTable();
        alert("Réservation annulée !");
    }
}
</script>
</body>
</html>
