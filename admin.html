<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Admin - Shadi Piscine</title>
<style>
body { font-family: Arial; background:#f4f4f4; color:#000; transition:0.3s; }
.dark-mode { background:#121212; color:#fff; }
.container { max-width:800px; margin:auto; padding:20px; }
input, button, textarea { width:100%; padding:10px; margin:6px 0; border-radius:8px; border:1px solid #ccc; }
button { cursor:pointer; background:#0077ff; color:white; border:none; }
button:hover { background:#0055cc; }
.logoutBtn { background:#ff5555; margin-top:10px; }
.logoutBtn:hover { background:#cc0000; }
.hidden { display:none; }
table { border-collapse:collapse; width:100%; margin-top:10px; }
th,td { border:1px solid #ccc; padding:8px; text-align:left; }
</style>
</head>
<body>

<div class="container" id="loginDiv">
<h2>Connexion Admin</h2>
<label>Nom d'utilisateur :</label>
<input type="text" id="adminUser">
<label>Mot de passe :</label>
<input type="password" id="adminPass">
<button style="background:red;" onclick="loginAdmin()">Se connecter</button>
<div id="loginError" style="color:red; display:none; margin-top:10px;">Nom ou mot de passe incorrect</div>
</div>

<div class="container hidden" id="adminDiv">
<h2>Admin - Shadi Piscine</h2>
<button onclick="toggleMode()">üåô/‚òÄÔ∏è Mode sombre/blanc</button>
<button class="logoutBtn" onclick="logout()">D√©connexion</button>

<hr>

<h3>Personnaliser le Splash</h3>
<label>Texte du Splash :</label>
<input type="text" id="splashText">
<label>Couleur du Splash :</label>
<input type="color" id="splashColor" value="#0077ff">
<button onclick="updateSplash()">Mettre √† jour le Splash</button>

<hr>

<h3>Message de bienvenue</h3>
<label>Message pour les clients :</label>
<input type="text" id="welcomeMessage">
<button onclick="updateWelcomeMessage()">Mettre √† jour le message</button>

<hr>

<h3>R√©servations</h3>
<table>
<tr><th>Jour</th><th>Heure</th><th>Nom</th><th>Email</th><th>Message</th><th>Action</th></tr>
<tbody id="adminTable"></tbody>
</table>

<hr>

<h3>Annonces / Messages</h3>
<textarea id="announcementText" rows="3" placeholder="√âcrire une annonce..."></textarea>
<button onclick="addAnnouncement()">Ajouter l'annonce</button>
<ul id="announcementList"></ul>

</div>

<script>
// --- Admin login ---
const adminAccount = {username:"admin", password:"admin"}; // √† modifier si besoin

function loginAdmin(){
    const u=document.getElementById('adminUser').value;
    const p=document.getElementById('adminPass').value;
    if(u===adminAccount.username && p===adminAccount.password){
        document.getElementById('loginDiv').classList.add('hidden');
        document.getElementById('adminDiv').classList.remove('hidden');
        loadAdminData();
    } else { document.getElementById('loginError').style.display='block'; }
}

function logout(){
    document.getElementById('adminDiv').classList.add('hidden');
    document.getElementById('loginDiv').classList.remove('hidden');
}

// --- Mode sombre ---
function toggleMode(){ document.body.classList.toggle('dark-mode'); }

// --- Splash ---
function updateSplash(){
    const text=document.getElementById('splashText').value;
    const color=document.getElementById('splashColor').value;
    localStorage.setItem('splashText', text);
    localStorage.setItem('splashColor', color);
    alert("Splash mis √† jour !");
}

// --- Message de bienvenue ---
function updateWelcomeMessage(){
    const msg=document.getElementById('welcomeMessage').value;
    localStorage.setItem('welcomeMessage', msg);
    alert("Message de bienvenue mis √† jour !");
}

// --- R√©servations ---
let reservations = JSON.parse(localStorage.getItem('reservations')) || [];
function loadAdminData(){
    reservations = JSON.parse(localStorage.getItem('reservations')) || [];
    const tbody=document.getElementById('adminTable');
    tbody.innerHTML="";
    reservations.forEach((r,index)=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${r.jour}</td><td>${r.heure}</td><td>${r.nom}</td><td>${r.email}</td><td>${r.message}</td>
        <td><button onclick="cancelReservation(${index})">Annuler</button></td>`;
        tbody.appendChild(tr);
    });

    // Load splash + welcome
    document.getElementById('splashText').value = localStorage.getItem('splashText') || "";
    document.getElementById('splashColor').value = localStorage.getItem('splashColor') || "#0077ff";
    document.getElementById('welcomeMessage').value = localStorage.getItem('welcomeMessage') || "";

    // Load announcements
    loadAnnouncements();
}

function cancelReservation(index){
    if(confirm("Voulez-vous annuler cette r√©servation ?")){
        reservations.splice(index,1);
        localStorage.setItem('reservations', JSON.stringify(reservations));
        loadAdminData();
    }
}

// --- Annonces ---
function addAnnouncement(){
    const text=document.getElementById('announcementText').value.trim();
    if(text===""){ return; }
    let announcements = JSON.parse(localStorage.getItem('announcements')) || [];
    announcements.push(text);
    localStorage.setItem('announcements', JSON.stringify(announcements));
    document.getElementById('announcementText').value="";
    loadAnnouncements();
}

function loadAnnouncements(){
    const announcements = JSON.parse(localStorage.getItem('announcements')) || [];
    const list = document.getElementById('announcementList');
    list.innerHTML="";
    announcements.forEach((a,index)=>{
        const li=document.createElement('li');
        li.textContent = a + " ";
        const del = document.createElement('button');
        del.textContent="Supprimer";
        del.onclick=()=>{ removeAnnouncement(index); };
        li.appendChild(del);
        list.appendChild(li);
    });
}

function removeAnnouncement(index){
    let announcements = JSON.parse(localStorage.getItem('announcements')) || [];
    announcements.splice(index,1);
    localStorage.setItem('announcements', JSON.stringify(announcements));
    loadAnnouncements();
}
</script>
</body>
</html>
